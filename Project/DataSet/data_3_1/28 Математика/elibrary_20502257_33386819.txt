УДК 519.6

ПРЕДСТАВЛЕНИЕ ТОРГОВЫХ СИГНАЛОВ НА ОСНОВЕ
АДАПТИВНОЙ СКОЛЬЗЯЩЕЙ СРЕДНЕЙ КАУФМАНА
В ВИДЕ СИСТЕМЫ ЛИНЕЙНЫХ НЕРАВЕНСТВ
М.М. Дышаев, И.М. Соколинская

Рассматривается применение задачи сильной отделимости для получения решений о по-
купке или продаже финансовых активов, таких как акции, иностранная валюта, фьючерсы и
т.д. на биржевом рынке. Для этого выполнено построение двух систем линейных неравенств,
задающих области в n-мерном пространстве, которые описывают экспертные торговые сиг-
налы на основе адаптивной скользящей средней Кауфмана.

Ключевые слова: задача сильной отделимости, фейеровское отображение, адаптивная
скользящая средняя Кауфмана, торговые сигналы для робота.

Введение
В настоящее время около 40 % объема торгов на мировых биржах осуществляется ро-

ботами — программами, работающими по различным алгоритмам, призванным определить
наилучший момент времени для покупки и/или продажи активов [1]. Рост автоматизации
торговых операций на биржах, растущая сложность применяемых алгоритмов неуклонно
ведут к повышению скорости изменения цен и усилению нестационарности в рыночных
процессах. В качестве перспективной модели автоматического принятия решений на фи-
нансовом рынке является модель, основанная на задаче сильной отделимости.

Задача сильной отделимости заключается в нахождении слоя наибольшей толщины
между двумя выпуклыми непересекающимися многогранниками [2]. Каждый многогран-
ник описывается системой линейных неравенств в n-мерном пространстве. Система линей-
ных неравенств для многогранника формируется на основании экспертных оценок. Такие
оценки описывают практическое использование экспертного набора рыночных показателей
следующего вида:

Ii = Ii(p, v, τ),

где p — массив временных рядов цен по различным активам, по которым совершались
сделки, v — соответствующие объемы сделок, τ — набор параметров для расчета рыночного
показателя.

Для каждого рыночного показателя, как правило, существует несколько эмпирически
установленных условий на значения, при которых генерируется сигнал к покупке или про-
даже актива. Например: «покупаем, если Ii > 0, продаем, если Ii < 0» или «покупаем, при
Ii > Ii−1, продаем при Ii < Ii−1». Таким образом, из соответствующих наборов условий
на значения рыночных показателей формируются две системы неравенств. Эти системы
описывают две непересекающиеся области в n-мерном пространстве, где n — общее коли-
чество переменных всех используемых рыночных показателей I. Геометрически это можно
представить как два выпуклых непересекающихся многогранника в n-мерном пространстве.
Текущее рыночное состояние описывается точкой в этом пространстве. Если для текуще-
го рыночного состояния одновременно выполняются все неравенства, описывающие один
из многогранников, это означает, что точка рыночного состояния оказалась «внутри», и
появился экспертный сигнал на покупку или продажу актива.
2013, т. 2, № 4 103



Представление торговых сигналов на основе адаптивной скользящей средней...

Как только рыночное состояние изменяется (например, на бирже заключена сделка,
поменялись котировки, изменилась величина спроса или предложения и т.д.), сразу же
одновременно изменяются и координаты точки, и координаты вершин многогранников в
n-мерном пространстве. Таким образом, решаемая задача имеет ярко выраженный неста-
ционарный характер.

Решение задачи сильной отделимости позволяет найти слой наибольшей толщины меж-
ду указанными многогранниками и на основе этого принимать решение о покупке или про-
даже актива даже в том случае, когда нет «точного попадания» точки рыночного состо-
яния в один из многогранников. В силу нестационарности исходных данных, фактически
единственным эффективным методом нахождения разделяющего слоя наибольшей толщи-
ны является метод решения задачи сильной отделимости с использованием фейеровских
отображений [3]. Особенностью данного метода является его высокая адаптивность к дина-
мическому изменению исходных данных непосредственно в ходе вычислений. Недостатком
указанного метода является медленная сходимость фейеровских процессов. Для преодоле-
ния этого недостатка в работах [4–6] был предложен и исследован параллельный алгоритм
решения задачи сильной отделимости с использованием фейеровских отображений.

1. Пример построения системы линейных неравенств
для адаптивного скользящего среднего Кауфмана
Рассмотрим пример построения системы линейных неравенств. В качестве примера

будем использовать адаптивное скользящее среднее (частный случай экспоненциального
скользящего среднего), разработанное Кауфманом [7]. Для удобства далее будем использо-
вать аббревиатуру AMA (Adaptive Moving Average).

Согласно [8], экспоненциальное скользящее среднее (Exponential Moving Average, EMA)
находится по рекуррентному соотношению:

EMAi = a · xi + (1− a) · EMAi−1, (1)

при этом:
EMA0 = x0 — т.е. первое значение EMA принимается равным первому значению ана-

лизируемого числового ряда,
a ∈ (0; 1) — «сглаживающий фактор».
Для учета нестационарности рыночных процессов Кауфман предложил использовать

переменный «сглаживающий фактор», т.е. коэффициенты, которые зависят от текущей
волатильности («изменчивости») рыночных цен. Авторами предложен следующий вид ука-
занных коэффициентов:

 2

 |xi − xi−n+1| 2 2 
ai = ai(x, n, f, s) = ( − 2 

n∑− ) +  , (2)
1
|xi−k − xi−k−1|

f + 1 s+ 1 s+ 1

k=0

где f и s — «сглаживающие» константы, n — количество периодов (сделок) для расчета
среднего. Авторы рекомендуют на практике использовать n = 10, f = 2 и s = 30.
104 Вестник ЮУрГУ. Серия «Вычислительная математика и информатика»



М.М. Дышаев, И.М. Соколинская

Используя соотношение (1) и учитывая, что «сглаживающий фактор» Кауфмана зави-
сит от волатильности и меняется со временем, для AMA получаем:

AMAi = ai · xi + (1− ai) ·AMAi−1, (3)
AMAi−1 = ai−1 · xi−1 + (1− ai−1) ·AMAi−2,

. . .

AMAi−n+1 = ai−n+1 · xi−n+1 + (1− ai−n+1) ·AMAi−n.

Учитывая, что AMAi−n = xi−n и подставляя соответствующие рекуррентные соотно-
шения, получаем следующую формулу расчета AMAi через значения числового ряда:

]
n∑− [

1 j∏−1 n∏−1

AMAi = aixi + ai−jxi−j (1− ai−k) + xi−n · (1− ai−j). (4)
j=1 k=0 j=0

Экспертные торговые сигналы (согласно предложениям авторов) генерируются с помо-
щью двойной фильтрации — на основе среднеквадратичного отклонения и по направлению
изменения АМА: 

AMAi − min (AMA) > δi,
Покупаем, если: i−n...i


 AMAi > AMAi−1.

max (AMA)−AMAi > δi,
Продаем, если: i−n...i

AMAi < AMAi−1.
В указанных соотношениях:

δi = K√· σi — значение фильтра,
√√ n∑−1
√ 1

σi = (∆ 2
i−j − ∆̄i) — среднеквадратичное отклонение измененийAMA в соседних

n
j=0

периодах.
K — доля стандартного отклонения для фильтрации, (авторы рекомендуют использо-

вать K = 0,1 (т.е. 10 %) для рынка фьючерсов и форекс, и K = 1 для рынка акций).
∆i = AMAi −AMAi−1 — разница между «соседними» значениями AMA.

n∑−1
1

∆̄i = ∆i−j — матожидание ∆i за n периодов (сделок).
n

j=0
min (AMA) — минимальное значение АМА за n последних периодов (сделок).
i−n...i
max (AMA) — максимальное значение АМА за n последних периодов (сделок).
i−n...i

2. Получение системы линейных неравенств в явном виде
Рассмотрим случай построения многогранника с неравенствами, отвечающими условию

«покупать».
Первое неравенство (фильтрация по среднеквадратичному отклонению):

AMAi − min (AMA) > δi.
i−n...i

Значения AMAi для расчета min (AMA) и δi находятся с помощью рекуррентной фор-
i−n...i

мулы (3).
2013, т. 2, № 4 105



Представление торговых сигналов на основе адаптивной скользящей средней...

Неравенство в явном виде:
]

n∑− [
1 j∏−1 n∏−1

aixi + ai−jxi−j (1− ai−k) + xi−n · (1− ai−j)− min (AMA)− δ
i− i > 0,

n...i
j=1 k=0 j=0

или, для наглядности:

aixi+ai−1(1− ai) · xi−1 + ai−2(1− ai)(1− ai−1) · xi−2 + . . .

. . .+ai−n+1(1− ai) . . . (1− ai−n+2) · xi−n+1 + xi−n(1− ai) . . . (1− ai−n+1)−
− min (AMA)− δi > 0.

i−n...i

Для получения второго неравенства (фильтрация по направлению изменения АМА)
воспользуемся рекуррентным соотношением (3):

AMAi −AMAi−1 = ai · (xi −AMAi−1).

По определению ai > 0, и, следовательно, условие AMAi > AMAi−1 тождественно
неравенству xi −AMAi−1 > 0.

Таким образом, с учетом вида (4) получаем второе неравенство в явном виде:

∑[ ]
n j∏−1 ∏n

xi − ai−1xi−1 − ai−jxi−j (1− ai−k) − xi−n−1 · (1− ai−j) > 0,
j=2 k=1 j=1

или, для наглядности:

xi − ai−1xi−1−ai−2(1− ai−1) · xi−2 − ai−3(1− ai−1)(1− ai−2) · xi−3 − . . .
. . .−ai−n(1− ai−1) . . . (1− ai−n+1) · xi−n − xi−n−1(1− ai−1) . . . (1− ai−n) > 0.

Окончательно, система неравенств для построения многогранника (условие «поку-
пать») принимает вид:


 n
 ∑− [

1 j∏− ]
1 n∏−1

aixi + ai−jxi−j (1− ai−k) + xi−n · (1− ai−j)− min (AMA)− δi > 0,
i−n...i

j=1 k=0 j=0

 ∑[ ]
n j∏−1 ∏n

xi − ai−1xi−1 − ai−jxi−j (1− ai−k) − xi−n−1 · (1− ai−j) > 0.
j=2 k=1 j=1

Система неравенств для построения многогранника (условие «продавать»):

 n
 ∑− [

1 j∏− ]
1 n∏−1

aixi + ai−jxi−j (1− ai−k) + xi−n · (1− ai−j)− max (AMA) + δi < 0,
i−n...i

j=1 k=0 j=0

 ∑[ ]
n j∏−1 ∏n

xi − ai−1xi−1 − ai−jxi−j (1− ai−k) − xi−n−1 · (1− ai−j) < 0.
j=2 k=1 j=1

Заключение
В данной работе проведено построение двух систем неравенств на основе экспертных

сигналов, базирующихся на адаптивной скользящей средней Кауфмана. Попадание в один
106 Вестник ЮУрГУ. Серия «Вычислительная математика и информатика»



М.М. Дышаев, И.М. Соколинская

многогранник дает сигнал к покупке, в другой — к продаже. Наибольший интерес пред-
ставляет случай отсутствия четкого экспертного сигнала, когда точка рыночного состояния
оказывается не точно «внутри» одного из многогранников, описываемых системами линей-
ных неравенств, а находится в некоторой окрестности. Принятие обоснованного решения
до момента появления четкого экспертного сигнала позволит максимизировать прибыль
от торговых операций. Реализация механизма генерации сигнала на покупку или продажу
актива в этом случае основывается на решении задачи сильной отделимости и определе-
нии расположения точки рыночного состояния относительно слоя наибольшей толщины,
разделяющего эти многогранники.

Исследование выполнено при финансовой поддержке РФФИ в рамках научного про-
екта № 12-01-00452 и Фонда содействия развитию малых форм предприятий в научно-
технической сфере в рамках проекта № 11533р/20979.

Литература
1. Володин, С.Н. Проблемы распространения алгоритмической торговли на крупнейших

мировых биржах / С.Н. Володин // Информационно-аналитический журнал «Полити-
ческое образование». — 2012. — URL: http://www.lawinrussia.ru/node/252999.

2. Ту, Дж. Принципы распознавания образов / Дж. Ту, Р. Гонсалес. Пер. с англ. Под ред.
Ю.И. Журавлёва. — М.: Мир, 1978. — 411 с.

3. Еремин, И.И. Фейеровские методы сильной отделимости выпуклых полиэдральных мно-
жеств / И.И. Еремин // Известия вузов. Сер. Математика. — 2006. — № 12. — С. 33–43.

4. Ершова, А.В. Параллельный алгоритм решения задачи сильной отделимости на основе
фейеровских отображений / А.В. Ершова, И.М. Соколинская // Вычислительные мето-
ды и программирование: новые вычислительные технологии. — 2011. — Т. 12. № 1. —
С. 423–434.

5. Ершова, А.В. О сходимости масштабируемого алгоритма построения псевдопроекции на
выпуклое замкнутое множество / А.В. Ершова, И.М. Соколинская // Вестник Южно-
Уральского государственного университета. Серия: Математическое моделирование и
программирование. — 2011. — № 37 (254). — С. 12–21.

6. Ершова, А.В. Исследование устойчивости параллельного алгоритма решения задачи
сильной отделимости на базе фейеровских отображений / А.В. Ершова, И.М. Соколин-
ская // Вестник Южно-Уральского государственного университета. Серия: Математи-
ческое моделирование и программирование. — 2012. — № 18 (277). — С. 5–12.

7. Kaufman, P.J. Smarter Trading: Improving Performance in Changing Markets /
P.J. Kaufman. — McGraw-Hill, 1995. — 257 p.

8. Hyndman, R.J. Forecasting with Exponential Smoothing. The State Space Approach /
R.J. Hyndman, A.B. Koehler, J.K. Ord, R.D. Snyder. — Springer, 2008. — 360 p.

Михаил Михайлович Дышаев, начальник отдела валютного дилинга, ОАО «Че-
линдбанк» (Челябинск, Российская Федерация), Mikhail.Dyshaev@gmail.com.

Ирина Михайловна Соколинская, к.ф.-м.н., доцент, кафедра вычислительной мате-
матики, Южно-Уральский государственный университет (Челябинск, Российская Федера-
ция), irinasokolinsky@gmail.com.
2013, т. 2, № 4 107



Представление торговых сигналов на основе адаптивной скользящей средней...

REPRESENTATION OF TRADING SIGNALS BASED
KAUFMAN ADAPTIVE MOVING AVERAGE AS A SYSTEM
OF LINEAR INEQUALITIES
M.M. Dyshaev, JSCB CHELINDBANK (Chelyabinsk, Russian Federation),
I.M. Sokolinskaya, South Ural State University (Chelyabinsk, Russian Federation)

This paper considers the adaptation of problem of strong separability for decisions about
buying or selling financial assets, such as equities, currencies, futures, etc. on the stock exchange.
There were constructed two systems of linear inequalities that define the regions in n-dimensional
space. These systems describe the expert trading signals that based on adaptive moving average
of Kaufman.

Keywords: the problem of strong separability, Fejer mapping, adaptive moving average of
Kaufman, trading signals for robot.

References
1. Volodin S.N. Problemy rasprostraneniya algoritmicheskoy torgovli na krupneyshikh mirovykh

birzhakh. Informatcionno-analiticheskii zhurnal "Politicheskoe obrazovanie". 2012. URL:
http://www.lawinrussia.ru/node/252999.

2. Tu Dzh., Gonsales R. Printcipy raspoznavaniia obrazov: Per. s angl. Pod red. Iu.I.
Zhuravlyova. M.: Mir, 1978. 411 p.

3. Eremin I.I. Feierovskie metody silnoi otdelimosti vypuclykh poliedralnykh mnozhestv.
Izvestiia vuzov. Ser. Matematika. 2006. No 12. P. 33–43.

4. Yershova, A.V., Sokolinskaya, I.M. Parallel’nyy algoritm resheniya zadachi silnoy otdelimosti
na osnove feyyerovskikh otobrazheniy. Vychislitel’nyye metody i programmirovaniye: novyye
vychislitel’nyye tekhnologii. 2011. T. 12. No 1. P. 423–434.

5. Yershova, A.V., Sokolinskaya, I.M. O skhodimosti masshtabiruyemogo algoritma
postroyeniya psevdoproyektsii na vypukloye zamknutoye mnozhestvo. Vestnik Yuzhno-
Ural’skogo gosudarstvennogo universiteta. Seriya: Matematicheskoye modelirovaniye i
programmirovaniye. 2011. No 37 (254). P. 12–21.

6. Yershova, A.V., Sokolinskaya, I.M. Issledovaniye ustoychivosti parallel’nogo algoritma
resheniya zadachi sil’noy otdelimosti na baze feyyerovskikh otobrazheniy. Vestnik Yuzhno-
Ural’skogo gosudarstvennogo universiteta. Seriya: Matematicheskoye modelirovaniye i
programmirovaniye. 2012. No 18 (277). P. 5–12.

7. Kaufman, P.J. Smarter Trading: Improving Performance in Changing Markets. McGraw-Hill,
Inc. 1995. 257 p.

8. Hyndman R.J., Koehler A.B., Ord J.K., Snyder R.D. Forecasting with Exponential
Smoothing. The State Space Approach. Springer. 2008. 360 p.

Поступила в редакцию 24 сентября 2013 г.

108 Вестник ЮУрГУ. Серия «Вычислительная математика и информатика»